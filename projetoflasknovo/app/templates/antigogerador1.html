<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- GOOGLE FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
    <!-- FIM DO GOOGLE FONTS-->

    <!-- BOOTSTRAP ICONS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- FIM BOOTSTRAP ICONS -->

    <!-- LINK DO CSS-->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/gerador1.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/rodape.css') }}">
    <!-- FIM LINK DO CSS-->

    <!-- LINK DO JS-->
    <script src="{{ url_for('static', filename='js/home_pagina.js') }}" defer></script>
    <script>
        function toggleNoiseInput() {
            var noiseCheckbox = document.getElementById("include_noise");
            var noiseInput = document.getElementById("noise_percentage");
            noiseInput.disabled = !noiseCheckbox.checked;
        }
    </script>
    <!-- FIM LINK DO JS-->

    <title>Gerador de Dados</title>
</head>

<body>
    <!-- Top-bar -->
    <div class="top-bar">
        <div class="container">
            <div class="logo">
                <img src="{{ url_for('static', filename='images/pibiti_2.png') }}" alt="Logo">
            </div>
            <div class="imagem-ufpi">
                <img src="{{ url_for('static', filename='images/ufpi_logo.jpg') }}" alt="Logo">
            </div>
            
            <div class="menu">
                <ul>
                    <li class="active"><a href="{{ url_for('main.index') }}">Home</a></li>
                    <li class="active"><a href="{{ url_for('main.pagina02_page') }}">Gerador</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!-- Fim Top-bar -->

    <!-- Container -->
    <div class="container-gerador">
        <div class="card">
            <div class="texto">
                <h1>Preencha todos os campos a seguir:</h1>

                <!-- Formulário de entrada de dados -->
                <form action="{{ url_for('main.generate_eeg') }}" method="POST" class="formulario">
                    
                    <div class="grupos">

                        <div class="grupo-1">
                            <div class="form-group">
                                <label for="name">Nome:</label>
                                <input type="text" id="name" name="name" required>
                            </div>

                            <div class="form-group">
                                <label for="birthdate">Data de Nascimento:</label>
                                <input type="date" id="birthdate" name="birthdate" required>
                            </div>

                            <div class="form-group">
                                <label for="gender">Gênero:</label><br>
                                <input type="radio" id="gender_male" name="gender" value="male" required>
                                <label for="gender_male">Masculino</label>
                                <input type="radio" id="gender_female" name="gender" value="female" required>
                                <label for="gender_female">Feminino</label><br><br>
                            </div>

                            <div class="form-group">
                                <label for="duration_minutes">Duração (minutos):</label>
                                <input type="number" id="duration_minutes" name="duration_minutes" min="1" required>
                            </div>
                            
                            <label for="noise">Adicionar Ruído:</label>
                            <input type="checkbox" id="noise" name="noise" value="yes"><br>

                            <div id="noise_percentage_div" style="display:none;">
                                <label for="noise_percentage">Porcentagem de Ruído:</label>
                                <input type="number" id="noise_percentage" name="noise_percentage" step="0.1"><br>
                            </div>

                        </div>

                        <div class= "grupo-2">

                            <div class="form-group">
                                <h7>Selecione os Canais do EEG</h7>
                                <ul class="channel-list" style="margin-top: 10px;">
                                    <li>
                                        <input type="checkbox" id="select-all-channels">
                                        <label for="select-all-channels">Todos</label>
                                    </li>
                                    {% for channel in channels %}
                                    <li>
                                        <input type="checkbox" id="{{ channel }}" name="channels" value="{{ channel }}">
                                        <label for="{{ channel }}">{{ channel }}</label>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>

                        </div>

                        <div class="grupo-3">

                            <div class="form-group">
                                <label for="wave_type">Onda predominante:</label>
                                <select id="wave_type" name="wave_type" required>
                                    <option value="">Selecione</option>
                                    <option value="alpha">Alfa</option>
                                    <option value="beta">Beta</option>
                                    <option value="delta">Delta</option>
                                    <option value="theta">Theta</option>
                                    <option value="gamma">Gama</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="container-botao">
                        <button class="botao-gerar" type="submit">Gerar EDF</button>
                    </div>
                    <!-- Botão para gerar EDF -->
                </form>
                <!-- Fim do formulário -->
            </div>
        </div>
    </div>

    <script>
        // Validação de seleção de canais e ondas antes de enviar o formulário
        document.querySelector('.formulario').addEventListener('submit', function(event) {
            // Verifica se pelo menos um canal foi selecionado
            var channels = document.querySelectorAll('input[name="channels"]:checked');
            if (channels.length === 0) {
                alert('Por favor, selecione pelo menos um canal de EEG.');
                event.preventDefault(); // Impede o envio do formulário
                return;
            }

            // Verifica se uma onda predominante foi selecionada
            var waveType = document.getElementById('wave_type').value;
            if (!waveType) {
                alert('Por favor, selecione pelo menos uma onda predominante.');
                event.preventDefault(); // Impede o envio do formulário
                return;
            }
        });

        // Selecionar todos os canais
        document.getElementById('select-all-channels').addEventListener('change', function() {
            var checkboxes = document.querySelectorAll('input[name="channels"]');
            checkboxes.forEach(function(checkbox) {
                checkbox.checked = document.getElementById('select-all-channels').checked;
            });
        });

        // Mostrar/ocultar a porcentagem de ruído
        document.getElementById('noise').addEventListener('change', function() {
            var noiseDiv = document.getElementById('noise_percentage_div');
            if (this.checked) {
                noiseDiv.style.display = 'block';
                document.getElementById('noise_percentage').required = true;
            } else {
                noiseDiv.style.display = 'none';
                document.getElementById('noise_percentage').required = false;
            }
        });
    </script>

    <!-- FOOTER -->
    <footer>
        <div class="rodape">
            <div class="imagem-rodape">
                <img src="{{ url_for('static', filename='images/image 3.png') }}" alt="logo">
            </div>
            
            <div class="info">
                <div class="botoes">
                    <button onclick="copyEmail()">
                        <i class="bi bi-envelope-fill"></i> crisly.santos@ufpi.edu.br
                    </button>
                </div>

                <p>Endereço: R. Cícero Duarte, 905 © 2024, Junco - Picos - PI - CEP:64607-670</p>
                <p>Universidade Federal do Piauí - UFPI</p>
            </div>
        </div>
    </footer>
</body>
</html>
